---
name: copilotskills
description: telephone_ai_anywhere 项目协作技能。用于功能迭代后的同步动作：代码验证、测试执行、架构文档更新、README 校准。关键词：Expo Router、Zustand、Agent、RAG、UI 重构、回归测试、文档对齐。
---
## 这个 Skill 是干什么的

该 Skill 约束本仓库每次功能变更后的“收尾动作”，防止只改代码不做验证和文档同步。

适用场景：
- 新增/修改消息能力（如图片、文件、语音、工具调用）
- Agent 路由、联网搜索、生图策略变更
- UI/交互重构（聊天页、输入栏、侧栏）
- RAG 流程或数据库结构调整

## 强制执行清单（每次功能变更后）

1. **代码正确性检查**
	- 执行受影响文件的错误检查（类型/语法/导入）。
	- 若有错误，优先修复变更引入的问题。

2. **测试执行**
	- 在 `__tests__/` 中若存在相关测试，必须执行。
	- 若不存在相关测试，补充最小可验证测试后执行。
	- 若测试基础设施本身异常（如 Jest preset 崩溃），需在结果中明确“失败原因与阻塞点”。

3. **架构文档同步**
	- 更新 `架构文档/` 内相关文档（至少覆盖受影响模块），如果可以，最好直接重新画一个更加符合目前内容的mermaid 代码 ，而不是修修补补。
	  - 其他受影响文档按需补充。

4. **README 校准**
	- 校对 `readme.md` 的功能描述与当前实现一致。
	- 避免旧实现残留（如 API 来源、路由机制、输入能力不一致）。

5. **提示词工程文件同步**
	- 若变更影响 Agent 路由、消息管线或多模态行为，需同步更新：
	  - `.github/copilot-instructions.md`
	  - `.github/skills/c.../SKILL.md`（本文件）
	- 重点检查是否存在“已过时描述”（例如旧路由顺序、旧输入能力、旧后处理策略）。

6. **输出结果要求**
	- 明确列出：改了哪些文件、验证了什么、测试结果如何、是否存在阻塞。

## 示例（本项目常见）

- 当聊天输入从“仅图片”升级到“图片 + 文件附件”时：
  - 更新 `types`、`database`、`store`、`ChatInput`、`MessageBubble`
	- 更新提示词工程文件中关于输入能力/路由能力的说明
  - 执行相关测试（消息持久化/store 行为）
  - 更新 `log8`（消息管线）与 `readme`（输入能力）

- 当 Agent 从规则路由升级为 LLM 路由优先时：
  - 更新 `agent.ts` 与回退策略
  - 更新 `log9`（路由决策与降级链路）
  - 在 README 中同步“联网检索/生图触发机制”

